trigger: none

pr: none

pool:
  vmImage: 'ubuntu-latest'

#variables:
#  - group: DEPLOY_DEV_VARS

stages:
  - stage: 'tfstate_storage'
    displayName: 'Create terraform state storage'
    jobs:
      - job: 'Terraform_State_Storage'
        displayName: 'Create terraform state storage'
        steps:
          - task: AzureCLI@2
            displayName: Azure CLI
            inputs:
              azureSubscription: 'MangoServiceConnection'
              scriptType: pscore
              scriptLocation: inlineScript
              inlineScript: |
                $rgName = "rg-tfstate-dev-d$(Get-Random 1000)"
                $location = "northeurope"
                $accountName = "tfstate$(Get-Random 1000)"
                $containerName = "tfstate"